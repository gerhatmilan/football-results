@page "/matches/{MatchID}"
@inherits MatchDetailsBase
@rendermode InteractiveServer

@if (Match != null)
{
    <div class="header">
        <MatchCard Match="Match" />
    </div>
    <div class="matchDetails">
        <h1>Details</h1>
        <ul>
            <li>
                Date:
                @if (Match.Date != null)
                {
                    <ToLocal DateTime="@DateTime.SpecifyKind(Match.Date.Value, DateTimeKind.Utc)" Format="yyyy. mm. dd" @rendermode="@RenderMode.InteractiveServer" />
                }
                else
                {
                    <span> Unknown</span>
                }
            </li>
            <li>
                Time:
                @if (Match.Date != null)
                {
                    <ToLocal DateTime="@DateTime.SpecifyKind(Match.Date.Value, DateTimeKind.Utc)" Format="HH:MM" @rendermode="@RenderMode.InteractiveServer" />
                }
                else
                {
                    <span> Unknown</span>
                }
            </li>
            <li>
                League: @Match.League.Name
            </li>
            <li>
                Season: @Match.Season
            </li>
            <li>
                Round: @(Match.Round ?? "Unknown")
            </li>
            <li>
                Country: @(Match.Venue != null ? (Match.Venue.CountryID) : "Unknown")
            </li>
            <li>
                Stadium: @(Match.Venue != null ? (Match.Venue.Name != null ? Match.Venue.Name : "Unknown") : "Unknown")
            </li>
        </ul>
    </div>
    <div class="head2head">
        <h1>Head to head</h1>
        <MatchFilter FilterTarget=this FilterSubmitted="OnMatchFilterSubmitted" FilterParameters="MatchFilterParameters" MatchOrderChanged="@OnMatchOrderChanged" />
        @if (Matches != null)
        {
            @if (Matches.Count() > 0)
            {
                <div class="head2head">
                    <div class="roundMatches">
                        @foreach (var matchesByLeagueGroup in GetMatchesByLeague())
                        {
                            {
                                <LeagueCard League="matchesByLeagueGroup.matches.First().League" Matches="matchesByLeagueGroup.matches" MatchOrderOption="@MatchOrderOption" />
                            }
                        }
                    </div>
                </div>
            }
            else
            {
                <h2>No matches found</h2>
            }
        }
    </div>
}
else
{
    <LoadingSpinner />
}
