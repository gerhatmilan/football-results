@inherits CreateGameBase

<p>
    Here you can create a private game room for predicting matches.
    You will be able to invite people after the room is created.
    You can set which leagues' matches the participants will be able to predict (at least one is required)
    , and how many points the participants will be given if their prediction meet the conditions.<br /><br />
</p>

<EditForm FormName="CreateGameForm" Model="@CreateGameModel" OnValidSubmit="Submit">
    <DataAnnotationsValidator />

    <div class="formContent">
        <div class="inputsDiv">
            <div class="col1">
                <div class="nameDiv mb-3">
                    <label for="name">Name</label>
                    <InputText id="name" @bind-Value="@CreateGameModel.Name" class="input form-control" placeholder="You can give a name to your game" />
                    <ValidationMessage For="@(() => CreateGameModel.Name)" class="error" />
                </div>
                <div class="descriptionDiv mb-3">
                    <label for="description">Description</label>
                    <InputTextArea id="description" @bind-Value="@CreateGameModel.Description" class="input form-control" rows="5" placeholder="You can write a short description about your game" />
                </div>
                <div class="pictureDiv mb-3">
                    <label for="picture">Picture</label>
                    <div class="gameBackground" style="background-image: url(@SelectedImage)"></div>
                    <InputFile id="picture" class="input form-control" OnChange="OnImageSelectedAsync" />
                    @if (ImageErrorMessage != null)
                    {
                        <div class="error">@ImageErrorMessage</div>
                    }
                </div>
            </div>
            <div class="col2">
                <div class="leaguesIncludedDiv mb-3">
                    <label>Leagues to be included in the prediction game</label>
                    @if (IncludedLeaguesErrorMessage != null)
                    {
                        <div class="error">@IncludedLeaguesErrorMessage</div>
                    }

                    @if (CreateGameModel.IncludedLeagues != null)
                    {
                        <ul>
                            @foreach (var leagueWithBindValue in CreateGameModel.IncludedLeagues)
                            {
                                <li>
                                    <InputCheckbox id="@leagueWithBindValue.First.LeagueID" @bind-Value="@leagueWithBindValue.Second" />
                                    <label for="@leagueWithBindValue.First.LeagueID">@leagueWithBindValue.First.Name</label>
                                </li>
                            }
                        </ul>
                    }
                    else
                    {
                        <LoadingSpinner />
                    }
                </div>
                <div class="rewardsDiv mb-3">
                    <label>Reward system settings</label><br />

                    <label class="labelSecondary" for="exact-score">Exact scoreline</label>
                    <InputNumber id="exact-score" @bind-Value="@CreateGameModel.ExactScorelineReward" class="input form-control rewardInput" />
                    <br />
                    <ValidationMessage For="@(() => CreateGameModel.ExactScorelineReward)" class="error" />

                    <label class="labelSecondary" for="outcome">Outcome</label>
                    <InputNumber id="outcome" @bind-Value="@CreateGameModel.OutcomeReward" class="input form-control rewardInput" />
                    <br />
                    <ValidationMessage For="@(() => CreateGameModel.OutcomeReward)" class="error" />

                    <label class="labelSecondary" for="goal-count">Goal count per team</label>
                    <InputNumber id="goal-count" @bind-Value="@CreateGameModel.GoalCountReward" class="input form-control rewardInput" />
                    <br />
                    <ValidationMessage For="@(() => CreateGameModel.GoalCountReward)" class="error" />

                    <label class="labelSecondary" for="goal-diff">Goal difference</label>
                    <InputNumber id="goal-diff" @bind-Value="@CreateGameModel.GoalDifferenceReward" class="input form-control rewardInput" />
                    <br />
                    <ValidationMessage For="@(() => CreateGameModel.GoalDifferenceReward)" class="error" />
                </div>
            </div>
        </div>
        <div class="submitDiv">
            <button type="submit" class="btn button">Create</button>
        </div>
        @if (ImageErrorMessage != null)
        {
            <div class="error">@NotCreatedErrorMessage</div>
        }
    </div>
</EditForm>

<p id="explanation">
    A short explanation for the reward system<br /><br />
    Only one of the following conditions can be met per prediction.<br /><br />
    <span>Exact scoreline</span>: the participant predicts the exact scoreline of the match<br />
    For example:<br />
    Prediction: 2-1, Actual: 2-1 -> 10 points<br /><br />
    <span>Outcome</span>: the participant predicts the outcome of the match (win, draw, lose)<br />
    For example:<br />
    Prediction: 2-0, Actual: 1-0, 2-0, 2-1, etc. -> 8 points<br /><br />
    <span>Goal count per team</span>: the participant predicts the number of goals scored by each team<br />
    For example:<br />
    Prediction: 1-0, Actual: 1-3 -> 5 points<br /><br />
    <span>Goal difference</span>: the participant predicts the difference between the goals scored by the two teams<br />
    For example:<br />
    Prediction: 1-0, Actual: 0-1 -> 3 points<br /><br />
    If the participant does not meet any of the above, they will not receive any points for that match.
</p>